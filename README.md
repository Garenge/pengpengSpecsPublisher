# PPSpecPublisher

一个用于管理 CocoaPods 私有仓库 Spec 文件的 macOS 应用程序。

## 🎯 项目简介

PPSpecPublisher 是一个专门为 iOS 开发者设计的工具，用于管理本地的 CocoaPods 私有仓库。它提供了直观的图形界面来查看、编辑和管理 Podspec 文件，大大简化了私有库版本管理的工作流程。

## ✨ 核心功能

### 已实现功能 ✅
- **Spec 库管理**: 显示本地私有库列表，支持选择和切换
- **版本管理**: 查看和管理不同版本的 Podspec 文件
- **内容预览**: 实时预览 Podspec 文件内容
- **新建版本**: 基于现有版本创建新版本，支持从 GitHub 获取最新内容
- **浮动选择器**: 优雅的版本选择界面
- **Socket 通信**: 与 CommandHelper 工具进行通信，执行命令行操作
- **快捷键支持**: 支持自定义快捷键，与 VSCode 保持一致的用户体验

### 待实现功能 🚧
- **目录选择**: 支持手动选择和拖拽选择本地私有库目录
- **统一编辑**: 合并新建和编辑功能，提供统一的编辑界面
- **变更管理**: 显示本地新增/修改的库，支持差异对比
- **Git 集成**: 在软件内直接执行 Git 操作（add, commit, push）
- **用户体验**: 搜索过滤、操作确认和撤销等优化功能

## ⌨️ 快捷键支持

### 默认快捷键
- **新建终端**: `Shift + Cmd + J` (与 VSCode 保持一致)
- **其他快捷键**: 持续添加中...

### 自定义快捷键
用户可以在系统偏好设置中自定义快捷键，支持以下操作：
- 新建版本
- 选择目录
- 刷新数据
- 搜索过滤

## 🏗️ 技术架构

### 前端 (macOS App)
- **语言**: Objective-C
- **框架**: UIKit (通过 Catalyst 支持 macOS)
- **布局**: Masonry 自动布局
- **网络**: NSURLSession 进行 HTTP 请求
- **Socket**: 自定义 Socket 客户端与 CommandHelper 通信
- **快捷键**: 支持系统级快捷键注册和响应

### 后端 (CommandHelper)
- **语言**: Objective-C
- **功能**: 执行命令行操作，解析 Podspec 文件
- **通信**: Socket 服务器，响应客户端请求

### 依赖管理
- **CocoaPods**: 管理第三方库依赖
- **主要依赖**:
  - `CocoaAsyncSocket`: Socket 通信
  - `Masonry`: 自动布局
  - `PPCatalystTool`: Catalyst 工具集
  - `PPToolKit`: 通用工具集

## 📱 界面结构

```
┌─────────────────────────────────────────────────────────────┐
│                    PPSpecPublisher                          │
├─────────────────┬───────────────────────────────────────────┤
│                 │                                           │
│   私有库列表     │              右侧内容区域                   │
│                 │  ┌─────────────┬─────────────────────────┐ │
│ - PPCatalystTool│  │ 版本选择    │     添加新版本           │ │
│ - PPToolKit     │  └─────────────┴─────────────────────────┘ │
│ - 其他库...      │                                           │
│                 │  ┌─────────────────────────────────────────┐ │
│                 │  │          Podspec 内容预览               │ │
│                 │  │                                         │ │
│                 │  └─────────────────────────────────────────┘ │
│                 │                                           │
│                 │  ┌─────────────────────────────────────────┐ │
│                 │  │              操作提示                   │ │
│                 │  └─────────────────────────────────────────┘ │
└─────────────────┴───────────────────────────────────────────┘
```

## 🚀 开发计划

### Phase 1: 基础功能完善 (当前阶段)
- [x] 基本界面和交互
- [x] Spec 库列表显示
- [x] 版本管理
- [x] 新建版本功能
- [x] 快捷键支持 (部分实现)
- [ ] 目录选择功能
- [ ] 统一编辑界面

### Phase 2: 核心功能增强
- [ ] 本地变更管理
- [ ] 差异对比功能
- [ ] 批量操作支持
- [ ] 搜索和过滤
- [ ] 完整快捷键支持

### Phase 3: Git 集成
- [ ] Git 状态显示
- [ ] 提交和推送功能
- [ ] 分支管理
- [ ] 冲突解决

### Phase 4: 用户体验优化
- [ ] 操作确认和撤销
- [ ] 错误处理和帮助
- [ ] 主题和个性化
- [ ] 性能优化

## 🛠️ 开发环境

### 系统要求
- macOS 10.15+ (Catalina)
- Xcode 12.0+
- CocoaPods 1.8.0+

### 安装步骤
1. 克隆项目到本地
2. 安装依赖: `pod install`
3. 打开 `PPSpecPublisher.xcworkspace`
4. 选择 `PPSpecPublisher` target 并运行

### 项目结构
```
PPSpecPublisher/
├── PPSpecPublisher/          # 主应用
│   ├── AddNew/              # 新建版本相关
│   ├── CommandClient/       # Socket 客户端
│   ├── Model/               # 数据模型
│   ├── View/                # 自定义视图
│   └── ViewController.m     # 主界面控制器
├── CommandHelper/            # 命令行工具
├── Pods/                     # 第三方依赖
└── README.md                 # 项目说明
```

## 📝 使用说明

### 基本操作
1. **选择私有库目录**: 目前硬编码在代码中，后续版本将支持手动选择
2. **查看库列表**: 左侧显示所有可用的私有库
3. **选择版本**: 点击右侧"版本号"按钮选择特定版本
4. **预览内容**: 在右侧文本区域查看 Podspec 文件内容
5. **新建版本**: 点击"添加新版本"创建新版本

### 快捷键操作
- 使用 `Shift + Cmd + J` 快速新建终端
- 更多快捷键功能正在开发中...

### 高级功能
- **Socket 通信**: 与 CommandHelper 工具通信，执行命令行操作
- **GitHub 集成**: 自动从 GitHub 获取最新版本的 Podspec 内容
- **模板系统**: 基于现有版本创建新版本

## 🔄 最近更新

### v1.1.0 (开发中)
- ✅ 添加快捷键支持
- ✅ 优化用户界面
- 🚧 目录选择功能开发中
- 🚧 统一编辑界面开发中

### v1.0.0
- ✅ 基础功能实现
- ✅ Spec 库管理
- ✅ 版本管理
- ✅ 新建版本功能

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进这个项目！

### 开发规范
- 使用 Objective-C 编写代码
- 遵循 Apple 的编码规范
- 添加适当的注释和文档
- 确保代码通过编译和基本测试

## 📄 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和开源社区！

---

**注意**: 这是一个正在开发中的项目，功能会持续更新和完善。如有问题或建议，请通过 Issue 反馈。
